const u=new Uint8Array(0);class d{constructor(t){this.size=t,this.#n=t>>>1,this.#o()}#t;#r;#e;#n;#o(){this.#r=new ArrayBuffer(this.size),this.#t=0,this.#e=this.size}#s(){this.#t&7&&(this.#t|=7,this.#t++,this.#e=this.size-this.#t)}alloc(t){if(t===0)return u;if(t<this.#n){t>this.#e&&this.#o();const s=new Uint8Array(this.#r,this.#t,t);return this.#t+=t,this.#e-=t,this.#s(),s}return new Uint8Array(t)}}let A=new d(16*1024);function y(e){return A.alloc(e)}const m=new TextEncoder,b=new TextDecoder,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=Object.fromEntries(Array.from(a).map((e,t)=>[e.charCodeAt(0),t]));o[61]=0;o[45]=62;o[95]=63;Object.fromEntries(Array.from(a).map((e,t)=>[t,e.charCodeAt(0)]));function p(e,t=!1){if(typeof Buffer<"u"){const n=Buffer.from(e,t?"base64url":"base64");return new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}if(Uint8Array.fromBase64)return Uint8Array.fromBase64(e,{alphabet:t?"base64url":"base64"});e=e.replace(/=+$/g,"");const s=e.length,c=s%4,h=c&&c-1,l=(s>>2)*3+h,r=y(s+3);m.encodeInto(`${e}===`,r);for(let n=0,i=0;n<s;n+=4,i+=3){const f=(o[r[n]]<<18)+(o[r[n+1]]<<12)+(o[r[n+2]]<<6)+o[r[n+3]];r[i]=f>>16,r[i+1]=f>>8&255,r[i+2]=f&255}return new Uint8Array(r.buffer,r.byteOffset,l)}export{b as a,p as d};
