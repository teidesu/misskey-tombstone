import{o as be,g as z,c as Z,a as Je,s as K,t as M,u as Xe,b as D,d as Ne,i as C,e as ue,F as pe,f as X,h as We}from"./web.cbMR6ChS.js";import{r as Ge,p as Ye,d as Qe}from"./crypto.CCLQ3iXl.js";/* empty css                      */import{d as Ze,a as ke}from"./base64.6e6NHyzi.js";function Ve(d){switch(d){case"image/png":return"png";case"image/jpeg":return"jpg";case"image/gif":return"gif";case"image/webp":return"webp";case"image/svg+xml":return"svg";case"video/mp4":return"mp4";default:throw new Error(`Unknown mime type: ${d}`)}}/*! medium-zoom 1.1.0 | MIT License | https://github.com/francoischalifour/medium-zoom */var Q=Object.assign||function(d){for(var f=1;f<arguments.length;f++){var s=arguments[f];for(var m in s)Object.prototype.hasOwnProperty.call(s,m)&&(d[m]=s[m])}return d},re=function(f){return f.tagName==="IMG"},ed=function(f){return NodeList.prototype.isPrototypeOf(f)},ne=function(f){return f&&f.nodeType===1},_e=function(f){var s=f.currentSrc||f.src;return s.substr(-4).toLowerCase()===".svg"},$e=function(f){try{return Array.isArray(f)?f.filter(re):ed(f)?[].slice.call(f).filter(re):ne(f)?[f].filter(re):typeof f=="string"?[].slice.call(document.querySelectorAll(f)).filter(re):[]}catch{throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},dd=function(f){var s=document.createElement("div");return s.classList.add("medium-zoom-overlay"),s.style.background=f,s},ud=function(f){var s=f.getBoundingClientRect(),m=s.top,g=s.left,e=s.width,I=s.height,_=f.cloneNode(),c=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,l=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return _.removeAttribute("id"),_.style.position="absolute",_.style.top=m+c+"px",_.style.left=g+l+"px",_.style.width=e+"px",_.style.height=I+"px",_.style.transform="",_},V=function(f,s){var m=Q({bubbles:!1,cancelable:!1,detail:void 0},s);if(typeof window.CustomEvent=="function")return new CustomEvent(f,m);var g=document.createEvent("CustomEvent");return g.initCustomEvent(f,m.bubbles,m.cancelable,m.detail),g},td=function d(f){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m=window.Promise||function(T){function w(){}T(w,w)},g=function(T){var w=T.target;if(w===A){p();return}y.indexOf(w)!==-1&&u({target:w})},e=function(){if(!(E||!a.original)){var T=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(O-T)>o.scrollOffset&&setTimeout(p,150)}},I=function(T){var w=T.key||T.keyCode;(w==="Escape"||w==="Esc"||w===27)&&p()},_=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},w=T;if(T.background&&(A.style.background=T.background),T.container&&T.container instanceof Object&&(w.container=Q({},o.container,T.container)),T.template){var P=ne(T.template)?T.template:document.querySelector(T.template);w.template=P}return o=Q({},o,w),y.forEach(function(j){j.dispatchEvent(V("medium-zoom:update",{detail:{zoom:L}}))}),L},c=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return d(Q({},o,T))},l=function(){for(var T=arguments.length,w=Array(T),P=0;P<T;P++)w[P]=arguments[P];var j=w.reduce(function(N,q){return[].concat(N,$e(q))},[]);return j.filter(function(N){return y.indexOf(N)===-1}).forEach(function(N){y.push(N),N.classList.add("medium-zoom-image")}),h.forEach(function(N){var q=N.type,x=N.listener,k=N.options;j.forEach(function(F){F.addEventListener(q,x,k)})}),L},r=function(){for(var T=arguments.length,w=Array(T),P=0;P<T;P++)w[P]=arguments[P];a.zoomed&&p();var j=w.length>0?w.reduce(function(N,q){return[].concat(N,$e(q))},[]):y;return j.forEach(function(N){N.classList.remove("medium-zoom-image"),N.dispatchEvent(V("medium-zoom:detach",{detail:{zoom:L}}))}),y=y.filter(function(N){return j.indexOf(N)===-1}),L},$=function(T,w){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return y.forEach(function(j){j.addEventListener("medium-zoom:"+T,w,P)}),h.push({type:"medium-zoom:"+T,listener:w,options:P}),L},v=function(T,w){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return y.forEach(function(j){j.removeEventListener("medium-zoom:"+T,w,P)}),h=h.filter(function(j){return!(j.type==="medium-zoom:"+T&&j.listener.toString()===w.toString())}),L},b=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},w=T.target,P=function(){var N={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},q=void 0,x=void 0;if(o.container)if(o.container instanceof Object)N=Q({},N,o.container),q=N.width-N.left-N.right-o.margin*2,x=N.height-N.top-N.bottom-o.margin*2;else{var k=ne(o.container)?o.container:document.querySelector(o.container),F=k.getBoundingClientRect(),ce=F.width,Pe=F.height,je=F.left,qe=F.top;N=Q({},N,{width:ce,height:Pe,left:je,top:qe})}q=q||N.width-o.margin*2,x=x||N.height-o.margin*2;var ee=a.zoomedHd||a.original,He=_e(ee)?q:ee.naturalWidth||q,xe=_e(ee)?x:ee.naturalHeight||x,te=ee.getBoundingClientRect(),Be=te.top,Re=te.left,fe=te.width,ae=te.height,De=Math.min(Math.max(fe,He),q)/fe,Ue=Math.min(Math.max(ae,xe),x)/ae,ie=Math.min(De,Ue),Ke=(-Re+(q-fe)/2+o.margin+N.left)/ie,Fe=(-Be+(x-ae)/2+o.margin+N.top)/ie,ye="scale("+ie+") translate3d("+Ke+"px, "+Fe+"px, 0)";a.zoomed.style.transform=ye,a.zoomedHd&&(a.zoomedHd.style.transform=ye)};return new m(function(j){if(w&&y.indexOf(w)===-1){j(L);return}var N=function ce(){E=!1,a.zoomed.removeEventListener("transitionend",ce),a.original.dispatchEvent(V("medium-zoom:opened",{detail:{zoom:L}})),j(L)};if(a.zoomed){j(L);return}if(w)a.original=w;else if(y.length>0){var q=y;a.original=q[0]}else{j(L);return}if(a.original.dispatchEvent(V("medium-zoom:open",{detail:{zoom:L}})),O=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,E=!0,a.zoomed=ud(a.original),document.body.appendChild(A),o.template){var x=ne(o.template)?o.template:document.querySelector(o.template);a.template=document.createElement("div"),a.template.appendChild(x.content.cloneNode(!0)),document.body.appendChild(a.template)}if(a.original.parentElement&&a.original.parentElement.tagName==="PICTURE"&&a.original.currentSrc&&(a.zoomed.src=a.original.currentSrc),document.body.appendChild(a.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),a.original.classList.add("medium-zoom-image--hidden"),a.zoomed.classList.add("medium-zoom-image--opened"),a.zoomed.addEventListener("click",p),a.zoomed.addEventListener("transitionend",N),a.original.getAttribute("data-zoom-src")){a.zoomedHd=a.zoomed.cloneNode(),a.zoomedHd.removeAttribute("srcset"),a.zoomedHd.removeAttribute("sizes"),a.zoomedHd.removeAttribute("loading"),a.zoomedHd.src=a.zoomed.getAttribute("data-zoom-src"),a.zoomedHd.onerror=function(){clearInterval(k),console.warn("Unable to reach the zoom image target "+a.zoomedHd.src),a.zoomedHd=null,P()};var k=setInterval(function(){a.zoomedHd.complete&&(clearInterval(k),a.zoomedHd.classList.add("medium-zoom-image--opened"),a.zoomedHd.addEventListener("click",p),document.body.appendChild(a.zoomedHd),P())},10)}else if(a.original.hasAttribute("srcset")){a.zoomedHd=a.zoomed.cloneNode(),a.zoomedHd.removeAttribute("sizes"),a.zoomedHd.removeAttribute("loading");var F=a.zoomedHd.addEventListener("load",function(){a.zoomedHd.removeEventListener("load",F),a.zoomedHd.classList.add("medium-zoom-image--opened"),a.zoomedHd.addEventListener("click",p),document.body.appendChild(a.zoomedHd),P()})}else P()})},p=function(){return new m(function(T){if(E||!a.original){T(L);return}var w=function P(){a.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(a.zoomed),a.zoomedHd&&document.body.removeChild(a.zoomedHd),document.body.removeChild(A),a.zoomed.classList.remove("medium-zoom-image--opened"),a.template&&document.body.removeChild(a.template),E=!1,a.zoomed.removeEventListener("transitionend",P),a.original.dispatchEvent(V("medium-zoom:closed",{detail:{zoom:L}})),a.original=null,a.zoomed=null,a.zoomedHd=null,a.template=null,T(L)};E=!0,document.body.classList.remove("medium-zoom--opened"),a.zoomed.style.transform="",a.zoomedHd&&(a.zoomedHd.style.transform=""),a.template&&(a.template.style.transition="opacity 150ms",a.template.style.opacity=0),a.original.dispatchEvent(V("medium-zoom:close",{detail:{zoom:L}})),a.zoomed.addEventListener("transitionend",w)})},u=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},w=T.target;return a.original?p():b({target:w})},n=function(){return o},t=function(){return y},i=function(){return a.original},y=[],h=[],E=!1,O=0,o=s,a={original:null,zoomed:null,zoomedHd:null,template:null};Object.prototype.toString.call(f)==="[object Object]"?o=f:(f||typeof f=="string")&&l(f),o=Q({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},o);var A=dd(o.background);document.addEventListener("click",g),document.addEventListener("keyup",I),document.addEventListener("scroll",e),window.addEventListener("resize",p);var L={open:b,close:p,toggle:u,update:_,clone:c,attach:l,detach:r,on:$,off:v,getOptions:n,getImages:t,getZoomedImage:i};return L};function rd(d,f){f===void 0&&(f={});var s=f.insertAt;if(!(typeof document>"u")){var m=document.head||document.getElementsByTagName("head")[0],g=document.createElement("style");g.type="text/css",s==="top"&&m.firstChild?m.insertBefore(g,m.firstChild):m.appendChild(g),g.styleSheet?g.styleSheet.cssText=d:g.appendChild(document.createTextNode(d))}}var nd=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";rd(nd);var cd=M("<img>");function fd(d){let f;return be(()=>{const s=td(f,{margin:24,background:"#00000060"});s.on("open",m=>{m.target.style.objectFit="contain"}),s.on("opened",m=>{m.target.style.objectFit=""})}),(()=>{var s=z(cd),m=f;return typeof m=="function"?Xe(m,s):f=s,Z(g=>{var e=d.class,I=d.src,_=d.alt;return e!==g.e&&Je(s,g.e=e),I!==g.t&&K(s,"src",g.t=I),_!==g.a&&K(s,"alt",g.a=_),g},{e:void 0,t:void 0,a:void 0}),s})()}var J=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},se={},B={},G={},de={},ze={};(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.createLanguage=d.lazy=d.lineEnd=d.lineBegin=d.char=d.newline=d.crlf=d.lf=d.cr=d.notMatch=d.alt=d.seq=d.regexp=d.str=d.Parser=d.failure=d.success=void 0;function f(v,b){return{success:!0,value:b,index:v}}d.success=f;function s(){return{success:!1}}d.failure=s;class m{constructor(b,p){this.handler=(u,n,t)=>{if(t.trace&&this.name!=null){const i=`${n}`;console.log(`${i.padEnd(6," ")}enter ${this.name}`);const y=b(u,n,t);if(y.success){const h=`${n}:${y.index}`;console.log(`${h.padEnd(6," ")}match ${this.name}`)}else{const h=`${n}`;console.log(`${h.padEnd(6," ")}fail ${this.name}`)}return y}return b(u,n,t)},this.name=p}map(b){return new m((p,u,n)=>{const t=this.handler(p,u,n);return t.success?f(t.index,b(t.value)):t})}text(){return new m((b,p,u)=>{const n=this.handler(b,p,u);if(!n.success)return n;const t=b.slice(p,n.index);return f(n.index,t)})}many(b){return new m((p,u,n)=>{let t,i=u;const y=[];for(;i<p.length&&(t=this.handler(p,i,n),!!t.success);)i=t.index,y.push(t.value);return y.length<b?s():f(i,y)})}sep(b,p){if(p<1)throw new Error('"min" must be a value greater than or equal to 1.');return I([this,I([b,this],1).many(p-1)]).map(u=>[u[0],...u[1]])}option(){return _([this,c(null)])}}d.Parser=m;function g(v){return new m((b,p,u)=>b.length-p<v.length||b.substr(p,v.length)!==v?s():f(p+v.length,v))}d.str=g;function e(v){const b=RegExp(`^(?:${v.source})`,v.flags);return new m((p,u,n)=>{const t=p.slice(u),i=b.exec(t);return i==null?s():f(u+i[0].length,i[0])})}d.regexp=e;function I(v,b){return new m((p,u,n)=>{let t,i=u;const y=[];for(let h=0;h<v.length;h++){if(t=v[h].handler(p,i,n),!t.success)return t;i=t.index,y.push(t.value)}return f(i,b!=null?y[b]:y)})}d.seq=I;function _(v){return new m((b,p,u)=>{let n;for(let t=0;t<v.length;t++)if(n=v[t].handler(b,p,u),n.success)return n;return s()})}d.alt=_;function c(v){return new m((b,p,u)=>f(p,v))}function l(v){return new m((b,p,u)=>v.handler(b,p,u).success?s():f(p,null))}d.notMatch=l,d.cr=g("\r"),d.lf=g(`
`),d.crlf=g(`\r
`),d.newline=_([d.crlf,d.cr,d.lf]),d.char=new m((v,b,p)=>{if(v.length-b<1)return s();const u=v.charAt(b);return f(b+1,u)}),d.lineBegin=new m((v,b,p)=>b===0||d.cr.handler(v,b-1,p).success||d.lf.handler(v,b-1,p).success?f(b,null):s()),d.lineEnd=new m((v,b,p)=>b===v.length||d.cr.handler(v,b,p).success||d.lf.handler(v,b,p).success?f(b,null):s());function r(v){const b=new m((p,u,n)=>(b.handler=v().handler,b.handler(p,u,n)));return b}d.lazy=r;function $(v){const b={};for(const p of Object.keys(v))b[p]=r(()=>{const u=v[p](b);if(u==null)throw new Error("syntax must return a parser.");return u.name=p,u});return b}d.createLanguage=$})(ze);var R={},he={};(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.TEXT=d.PLAIN=d.FN=d.LINK=d.N_URL=d.HASHTAG=d.MENTION=d.MATH_INLINE=d.INLINE_CODE=d.STRIKE=d.ITALIC=d.SMALL=d.BOLD=d.EMOJI_CODE=d.UNI_EMOJI=d.CENTER=d.MATH_BLOCK=d.CODE_BLOCK=d.SEARCH=d.QUOTE=d.isMfmBlock=void 0;const f=["quote","search","blockCode","mathBlock","center"];function s(o){return f.includes(o.type)}d.isMfmBlock=s;const m=o=>({type:"quote",children:o});d.QUOTE=m;const g=(o,a)=>({type:"search",props:{query:o,content:a}});d.SEARCH=g;const e=(o,a)=>({type:"blockCode",props:{code:o,lang:a}});d.CODE_BLOCK=e;const I=o=>({type:"mathBlock",props:{formula:o}});d.MATH_BLOCK=I;const _=o=>({type:"center",children:o});d.CENTER=_;const c=o=>({type:"unicodeEmoji",props:{emoji:o}});d.UNI_EMOJI=c;const l=o=>({type:"emojiCode",props:{name:o}});d.EMOJI_CODE=l;const r=o=>({type:"bold",children:o});d.BOLD=r;const $=o=>({type:"small",children:o});d.SMALL=$;const v=o=>({type:"italic",children:o});d.ITALIC=v;const b=o=>({type:"strike",children:o});d.STRIKE=b;const p=o=>({type:"inlineCode",props:{code:o}});d.INLINE_CODE=p;const u=o=>({type:"mathInline",props:{formula:o}});d.MATH_INLINE=u;const n=(o,a,A)=>({type:"mention",props:{username:o,host:a,acct:A}});d.MENTION=n;const t=o=>({type:"hashtag",props:{hashtag:o}});d.HASHTAG=t;const i=(o,a)=>{const A={type:"url",props:{url:o}};return a&&(A.props.brackets=a),A};d.N_URL=i;const y=(o,a,A)=>({type:"link",props:{silent:o,url:a},children:A});d.LINK=y;const h=(o,a,A)=>({type:"fn",props:{name:o,args:a},children:A});d.FN=h;const E=o=>({type:"plain",children:[(0,d.TEXT)(o)]});d.PLAIN=E;const O=o=>({type:"text",props:{text:o}});d.TEXT=O})(he);Object.defineProperty(R,"__esModule",{value:!0});R.inspectOne=R.stringifyTree=R.stringifyNode=R.mergeText=void 0;const ge=he;function ad(d){const f=[],s=[];function m(){s.length>0&&(f.push((0,ge.TEXT)(s.join(""))),s.length=0)}const g=d.flat(1);for(const e of g)typeof e=="string"?s.push(e):!Array.isArray(e)&&e.type==="text"?s.push(e.props.text):(m(),f.push(e));return m(),f}R.mergeText=ad;function Me(d){var f;switch(d.type){case"quote":return U(d.children).split(`
`).map(s=>`> ${s}`).join(`
`);case"search":return d.props.content;case"blockCode":return`\`\`\`${(f=d.props.lang)!==null&&f!==void 0?f:""}
${d.props.code}
\`\`\``;case"mathBlock":return`\\[
${d.props.formula}
\\]`;case"center":return`<center>
${U(d.children)}
</center>`;case"emojiCode":return`:${d.props.name}:`;case"unicodeEmoji":return d.props.emoji;case"bold":return`**${U(d.children)}**`;case"small":return`<small>${U(d.children)}</small>`;case"italic":return`<i>${U(d.children)}</i>`;case"strike":return`~~${U(d.children)}~~`;case"inlineCode":return`\`${d.props.code}\``;case"mathInline":return`\\(${d.props.formula}\\)`;case"mention":return d.props.acct;case"hashtag":return`#${d.props.hashtag}`;case"url":return d.props.brackets?`<${d.props.url}>`:d.props.url;case"link":return`${d.props.silent?"?":""}[${U(d.children)}](${d.props.url})`;case"fn":{const s=Object.keys(d.props.args).map(g=>{const e=d.props.args[g];return e===!0?g:`${g}=${e}`}),m=s.length>0?"."+s.join(","):"";return`$[${d.props.name}${m} ${U(d.children)}]`}case"plain":return`<plain>
${U(d.children)}
</plain>`;case"text":return d.props.text}throw new Error("unknown mfm node")}R.stringifyNode=Me;var W;(function(d){d[d.none=0]="none",d[d.inline=1]="inline",d[d.block=2]="block"})(W||(W={}));function U(d){const f=[];let s=W.none;for(const m of d){let g=!0;(0,ge.isMfmBlock)(m)?(s===W.none&&(g=!1),s=W.block):((s===W.none||s===W.inline)&&(g=!1),s=W.inline),g&&f.push((0,ge.TEXT)(`
`)),f.push(m)}return f.map(m=>Me(m)).join("")}R.stringifyTree=U;function Ae(d,f){if(f(d),d.children!=null)for(const s of d.children)Ae(s,f)}R.inspectOne=Ae;var ve={};Object.defineProperty(ve,"__esModule",{value:!0});ve.default=/(?:\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c[\udffc-\udfff]|\ud83e\udef1\ud83c\udffc\u200d\ud83e\udef2\ud83c[\udffb\udffd-\udfff]|\ud83e\udef1\ud83c\udffd\u200d\ud83e\udef2\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\udef1\ud83c\udffe\u200d\ud83e\udef2\ud83c[\udffb-\udffd\udfff]|\ud83e\udef1\ud83c\udfff\u200d\ud83e\udef2\ud83c[\udffb-\udffe]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d\udc8f\ud83c[\udffb-\udfff]|\ud83d\udc91\ud83c[\udffb-\udfff]|\ud83e\udd1d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d\udc8f\udc91]|\ud83e\udd1d)|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd4\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83d\ude36\u200d\ud83c\udf2b\ufe0f|\u2764\ufe0f\u200d\ud83d\udd25|\u2764\ufe0f\u200d\ud83e\ude79|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83d\ude2e\u200d\ud83d\udca8|\ud83d\ude35\u200d\ud83d\udcab|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b|\ud83d\udc26\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|\ud83e\udef0|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd\udec3-\udec5\udef1-\udef8]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udc8e\udc90\udc92-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udedc-\udedf\udeeb\udeec\udef4-\udefc\udfe0-\udfeb\udff0]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78-\uddb4\uddb7\uddba\uddbc-\uddcc\uddd0\uddde-\uddff\ude70-\ude7c\ude80-\ude88\ude90-\udebd\udebf-\udec2\udece-\udedb\udee0-\udee8]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g;var Ee;function id(){if(Ee)return de;Ee=1;var d=J&&J.__createBinding||(Object.create?function(u,n,t,i){i===void 0&&(i=t);var y=Object.getOwnPropertyDescriptor(n,t);(!y||("get"in y?!n.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(u,i,y)}:function(u,n,t,i){i===void 0&&(i=t),u[i]=n[t]}),f=J&&J.__setModuleDefault||(Object.create?function(u,n){Object.defineProperty(u,"default",{enumerable:!0,value:n})}:function(u,n){u.default=n}),s=J&&J.__importStar||function(u){if(u&&u.__esModule)return u;var n={};if(u!=null)for(var t in u)t!=="default"&&Object.prototype.hasOwnProperty.call(u,t)&&d(n,u,t);return f(n,u),n},m=J&&J.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(de,"__esModule",{value:!0}),de.language=void 0;const g=s(Se()),e=s(ze),I=R,_=m(ve),c=e.regexp(/[\u0020\u3000\t]/),l=e.regexp(/[a-z0-9]/i),r=e.alt([e.crlf,e.cr,e.lf]);function $(u){return new e.Parser((n,t,i)=>{const y=[];let h=t;for(let E=0;E<u.length;E++){const O=u[E].handler(n,h,i);if(!O.success)return h===t?e.failure():e.success(h,n.slice(t,h));y.push(O.value),h=O.index}return e.success(h,y)})}const v=new e.Parser((u,n,t)=>t.linkLabel?e.failure():e.success(n,null)),b=new e.Parser((u,n,t)=>t.depth<t.nestLimit?e.success(n,null):e.failure());function p(u,n){const t=e.alt([e.seq([b,u],1),n??e.char]);return new e.Parser((i,y,h)=>{h.depth++;const E=t.handler(i,y,h);return h.depth--,E})}return de.language=e.createLanguage({fullParser:u=>u.full.many(0),simpleParser:u=>u.simple.many(0),full:u=>e.alt([u.unicodeEmoji,u.centerTag,u.smallTag,u.plainTag,u.boldTag,u.italicTag,u.strikeTag,u.urlAlt,u.big,u.boldAsta,u.italicAsta,u.boldUnder,u.italicUnder,u.codeBlock,u.inlineCode,u.quote,u.mathBlock,u.mathInline,u.strikeWave,u.fn,u.mention,u.hashtag,u.emojiCode,u.link,u.url,u.search,u.text]),simple:u=>e.alt([u.unicodeEmoji,u.emojiCode,u.text]),inline:u=>e.alt([u.unicodeEmoji,u.smallTag,u.plainTag,u.boldTag,u.italicTag,u.strikeTag,u.urlAlt,u.big,u.boldAsta,u.italicAsta,u.boldUnder,u.italicUnder,u.inlineCode,u.mathInline,u.strikeWave,u.fn,u.mention,u.hashtag,u.emojiCode,u.link,u.url,u.text]),quote:u=>{const n=e.seq([e.str(">"),c.option(),e.seq([e.notMatch(r),e.char],1).many(0).text()],2).sep(r,1),t=e.seq([r.option(),r.option(),e.lineBegin,n,r.option(),r.option()],3);return new e.Parser((i,y,h)=>{let E;if(E=t.handler(i,y,h),!E.success)return E;const O=E.value,o=E.index;return O.length===1&&O[0].length===0?e.failure():(E=p(u.fullParser).many(0).handler(O.join(`
`),0,h),E.success?e.success(o,g.QUOTE((0,I.mergeText)(E.value))):E)})},codeBlock:u=>{const n=e.str("```");return e.seq([r.option(),e.lineBegin,n,e.seq([e.notMatch(r),e.char],1).many(0),r,e.seq([e.notMatch(e.seq([r,n,e.lineEnd])),e.char],1).many(1),r,n,e.lineEnd,r.option()]).map(t=>{const i=t[3].join("").trim(),y=t[5].join("");return g.CODE_BLOCK(y,i.length>0?i:null)})},mathBlock:u=>{const n=e.str("\\["),t=e.str("\\]");return e.seq([r.option(),e.lineBegin,n,r.option(),e.seq([e.notMatch(e.seq([r.option(),t])),e.char],1).many(1),r.option(),t,e.lineEnd,r.option()]).map(i=>{const y=i[4].join("");return g.MATH_BLOCK(y)})},centerTag:u=>{const n=e.str("<center>"),t=e.str("</center>");return e.seq([r.option(),e.lineBegin,n,r.option(),e.seq([e.notMatch(e.seq([r.option(),t])),p(u.inline)],1).many(1),r.option(),t,e.lineEnd,r.option()]).map(i=>g.CENTER((0,I.mergeText)(i[4])))},big:u=>{const n=e.str("***");return $([n,e.seq([e.notMatch(n),p(u.inline)],1).many(1),n]).map(t=>typeof t=="string"?t:g.FN("tada",{},(0,I.mergeText)(t[1])))},boldAsta:u=>{const n=e.str("**");return $([n,e.seq([e.notMatch(n),p(u.inline)],1).many(1),n]).map(t=>typeof t=="string"?t:g.BOLD((0,I.mergeText)(t[1])))},boldTag:u=>{const n=e.str("<b>"),t=e.str("</b>");return $([n,e.seq([e.notMatch(t),p(u.inline)],1).many(1),t]).map(i=>typeof i=="string"?i:g.BOLD((0,I.mergeText)(i[1])))},boldUnder:u=>{const n=e.str("__");return e.seq([n,e.alt([l,c]).many(1),n]).map(t=>g.BOLD((0,I.mergeText)(t[1])))},smallTag:u=>{const n=e.str("<small>"),t=e.str("</small>");return $([n,e.seq([e.notMatch(t),p(u.inline)],1).many(1),t]).map(i=>typeof i=="string"?i:g.SMALL((0,I.mergeText)(i[1])))},italicTag:u=>{const n=e.str("<i>"),t=e.str("</i>");return $([n,e.seq([e.notMatch(t),p(u.inline)],1).many(1),t]).map(i=>typeof i=="string"?i:g.ITALIC((0,I.mergeText)(i[1])))},italicAsta:u=>{const n=e.str("*"),t=e.seq([n,e.alt([l,c]).many(1),n]);return new e.Parser((i,y,h)=>{const E=t.handler(i,y,h);if(!E.success)return e.failure();const O=i.slice(0,y);return/[a-z0-9]$/i.test(O)?e.failure():e.success(E.index,g.ITALIC((0,I.mergeText)(E.value[1])))})},italicUnder:u=>{const n=e.str("_"),t=e.seq([n,e.alt([l,c]).many(1),n]);return new e.Parser((i,y,h)=>{const E=t.handler(i,y,h);if(!E.success)return e.failure();const O=i.slice(0,y);return/[a-z0-9]$/i.test(O)?e.failure():e.success(E.index,g.ITALIC((0,I.mergeText)(E.value[1])))})},strikeTag:u=>{const n=e.str("<s>"),t=e.str("</s>");return $([n,e.seq([e.notMatch(t),p(u.inline)],1).many(1),t]).map(i=>typeof i=="string"?i:g.STRIKE((0,I.mergeText)(i[1])))},strikeWave:u=>{const n=e.str("~~");return $([n,e.seq([e.notMatch(e.alt([n,r])),p(u.inline)],1).many(1),n]).map(t=>typeof t=="string"?t:g.STRIKE((0,I.mergeText)(t[1])))},unicodeEmoji:u=>{const n=RegExp(_.default.source);return e.regexp(n).map(t=>g.UNI_EMOJI(t))},plainTag:u=>{const n=e.str("<plain>"),t=e.str("</plain>");return e.seq([n,r.option(),e.seq([e.notMatch(e.seq([r.option(),t])),e.char],1).many(1).text(),r.option(),t],2).map(i=>g.PLAIN(i))},fn:u=>{const n=new e.Parser((h,E,O)=>{const o=e.regexp(/[a-z0-9_]+/i).handler(h,E,O);return o.success?e.success(o.index,o.value):o}),t=e.seq([e.regexp(/[a-z0-9_]+/i),e.seq([e.str("="),e.regexp(/[a-z0-9_.-]+/i)],1).option()]).map(h=>({k:h[0],v:h[1]!=null?h[1]:!0})),i=e.seq([e.str("."),t.sep(e.str(","),1)],1).map(h=>{const E={};for(const O of h)E[O.k]=O.v;return E}),y=e.str("]");return $([e.str("$["),n,i.option(),e.str(" "),e.seq([e.notMatch(y),p(u.inline)],1).many(1),y]).map(h=>{if(typeof h=="string")return h;const E=h[1],O=h[2]||{},o=h[4];return g.FN(E,O,(0,I.mergeText)(o))})},inlineCode:u=>{const n=e.str("`");return e.seq([n,e.seq([e.notMatch(e.alt([n,e.str("´"),r])),e.char],1).many(1),n]).map(t=>g.INLINE_CODE(t[1].join("")))},mathInline:u=>{const n=e.str("\\("),t=e.str("\\)");return e.seq([n,e.seq([e.notMatch(e.alt([t,r])),e.char],1).many(1),t]).map(i=>g.MATH_INLINE(i[1].join("")))},mention:u=>{const n=e.seq([v,e.str("@"),e.regexp(/[a-z0-9_-]+/i),e.seq([e.str("@"),e.regexp(/[a-z0-9_.-]+/i)],1).option()]);return new e.Parser((t,i,y)=>{let h;if(h=n.handler(t,i,y),!h.success)return e.failure();const E=t.slice(0,i);if(/[a-z0-9]$/i.test(E))return e.failure();let O=!1;const o=h.index,a=h.value[2],A=h.value[3];let L=A;A!=null&&(h=/[.-]+$/.exec(A),h!=null&&(L=A.slice(0,-1*h[0].length),L.length===0&&(O=!0,L=null)));let S=a;if(h=/-+$/.exec(a),h!=null&&(L==null?S=a.slice(0,-1*h[0].length):O=!0),(S.length===0||S[0]==="-")&&(O=!0),L!=null&&/^[.-]/.test(L)&&(O=!0),O)return e.success(o,t.slice(i,o));const T=L!=null?`@${S}@${L}`:`@${S}`;return e.success(i+T.length,g.MENTION(S,L,T))})},hashtag:u=>{const n=e.str("#"),t=e.seq([e.notMatch(e.alt([e.regexp(/[ \u3000\t.,!?'"#:/[\]【】()「」（）<>]/),c,r])),e.char],1),i=e.lazy(()=>e.alt([e.seq([e.str("("),p(i,t).many(0),e.str(")")]),e.seq([e.str("["),p(i,t).many(0),e.str("]")]),e.seq([e.str("「"),p(i,t).many(0),e.str("」")]),e.seq([e.str("（"),p(i,t).many(0),e.str("）")]),t])),y=e.seq([v,n,i.many(1).text()],2);return new e.Parser((h,E,O)=>{const o=y.handler(h,E,O);if(!o.success)return e.failure();const a=h.slice(0,E);if(/[a-z0-9]$/i.test(a))return e.failure();const A=o.index,L=o.value;return/^[0-9]+$/.test(L)?e.failure():e.success(A,g.HASHTAG(L))})},emojiCode:u=>{const n=e.notMatch(e.regexp(/[a-z0-9]/i)),t=e.str(":");return e.seq([e.alt([e.lineBegin,n]),t,e.regexp(/[a-z0-9_+-]+/i),t,e.alt([e.lineEnd,n])],2).map(i=>g.EMOJI_CODE(i))},link:u=>{const n=new e.Parser((i,y,h)=>{h.linkLabel=!0;const E=u.inline.handler(i,y,h);return h.linkLabel=!1,E}),t=e.str("]");return e.seq([v,e.alt([e.str("?["),e.str("[")]),e.seq([e.notMatch(e.alt([t,r])),p(n)],1).many(1),t,e.str("("),e.alt([u.urlAlt,u.url]),e.str(")")]).map(i=>{const y=i[1]==="?[",h=i[2],E=i[5];return g.LINK(y,E.props.url,(0,I.mergeText)(h))})},url:u=>{const n=e.regexp(/[.,a-z0-9_/:%#@$&?!~=+-]/i),t=e.lazy(()=>e.alt([e.seq([e.str("("),p(t,n).many(0),e.str(")")]),e.seq([e.str("["),p(t,n).many(0),e.str("]")]),n])),i=e.seq([v,e.regexp(/https?:\/\//),t.many(1).text()]);return new e.Parser((y,h,E)=>{let O;if(O=i.handler(y,h,E),!O.success)return e.failure();const o=O.index;let a=o;const A=O.value[1];let L=O.value[2];return O=/[.,]+$/.exec(L),O!=null&&(a-=O[0].length,L=L.slice(0,-1*O[0].length),L.length===0)?e.success(o,y.slice(h,o)):e.success(a,g.N_URL(A+L,!1))})},urlAlt:u=>{const n=e.str("<"),t=e.str(">"),i=e.seq([v,n,e.regexp(/https?:\/\//),e.seq([e.notMatch(e.alt([t,c])),e.char],1).many(1),t]).text();return new e.Parser((y,h,E)=>{const O=i.handler(y,h,E);if(!O.success)return e.failure();const o=O.value.slice(1,O.value.length-1);return e.success(O.index,g.N_URL(o,!0))})},search:u=>{const n=e.alt([e.regexp(/\[(検索|search)\]/i),e.regexp(/(検索|search)/i)]);return e.seq([r.option(),e.lineBegin,e.seq([e.notMatch(e.alt([r,e.seq([c,n,e.lineEnd])])),e.char],1).many(1),c,n,e.lineEnd,r.option()]).map(t=>{const i=t[2].join("");return g.SEARCH(i,`${i}${t[3]}${t[4]}`)})},text:u=>e.char}),de}var Oe;function sd(){if(Oe)return G;Oe=1,Object.defineProperty(G,"__esModule",{value:!0}),G.simpleParser=G.fullParser=void 0;const d=id(),f=R;function s(g,e){const I=d.language.fullParser.handler(g,0,{nestLimit:e.nestLimit!=null?e.nestLimit:20,depth:0,linkLabel:!1,trace:!1});return(0,f.mergeText)(I.value)}G.fullParser=s;function m(g){const e=d.language.simpleParser.handler(g,0,{});return(0,f.mergeText)(e.value)}return G.simpleParser=m,G}var Te;function od(){if(Te)return B;Te=1,Object.defineProperty(B,"__esModule",{value:!0}),B.extract=B.inspect=B.toString=B.parseSimple=B.parse=void 0;const d=sd(),f=R;function s(_,c={}){return(0,d.fullParser)(_,{nestLimit:c.nestLimit})}B.parse=s;function m(_){return(0,d.simpleParser)(_)}B.parseSimple=m;function g(_){return Array.isArray(_)?(0,f.stringifyTree)(_):(0,f.stringifyNode)(_)}B.toString=g;function e(_,c){if(Array.isArray(_))for(const l of _)(0,f.inspectOne)(l,c);else(0,f.inspectOne)(_,c)}B.inspect=e;function I(_,c){const l=[];return e(_,r=>{c(r)&&l.push(r)}),l}return B.extract=I,B}var Le;function Se(){return Le||(Le=1,function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.TEXT=d.PLAIN=d.FN=d.LINK=d.N_URL=d.HASHTAG=d.MENTION=d.MATH_INLINE=d.INLINE_CODE=d.STRIKE=d.ITALIC=d.SMALL=d.BOLD=d.EMOJI_CODE=d.UNI_EMOJI=d.CENTER=d.MATH_BLOCK=d.CODE_BLOCK=d.SEARCH=d.QUOTE=d.extract=d.inspect=d.toString=d.parseSimple=d.parse=void 0;var f=od();Object.defineProperty(d,"parse",{enumerable:!0,get:function(){return f.parse}}),Object.defineProperty(d,"parseSimple",{enumerable:!0,get:function(){return f.parseSimple}}),Object.defineProperty(d,"toString",{enumerable:!0,get:function(){return f.toString}}),Object.defineProperty(d,"inspect",{enumerable:!0,get:function(){return f.inspect}}),Object.defineProperty(d,"extract",{enumerable:!0,get:function(){return f.extract}});var s=he;Object.defineProperty(d,"QUOTE",{enumerable:!0,get:function(){return s.QUOTE}}),Object.defineProperty(d,"SEARCH",{enumerable:!0,get:function(){return s.SEARCH}}),Object.defineProperty(d,"CODE_BLOCK",{enumerable:!0,get:function(){return s.CODE_BLOCK}}),Object.defineProperty(d,"MATH_BLOCK",{enumerable:!0,get:function(){return s.MATH_BLOCK}}),Object.defineProperty(d,"CENTER",{enumerable:!0,get:function(){return s.CENTER}}),Object.defineProperty(d,"UNI_EMOJI",{enumerable:!0,get:function(){return s.UNI_EMOJI}}),Object.defineProperty(d,"EMOJI_CODE",{enumerable:!0,get:function(){return s.EMOJI_CODE}}),Object.defineProperty(d,"BOLD",{enumerable:!0,get:function(){return s.BOLD}}),Object.defineProperty(d,"SMALL",{enumerable:!0,get:function(){return s.SMALL}}),Object.defineProperty(d,"ITALIC",{enumerable:!0,get:function(){return s.ITALIC}}),Object.defineProperty(d,"STRIKE",{enumerable:!0,get:function(){return s.STRIKE}}),Object.defineProperty(d,"INLINE_CODE",{enumerable:!0,get:function(){return s.INLINE_CODE}}),Object.defineProperty(d,"MATH_INLINE",{enumerable:!0,get:function(){return s.MATH_INLINE}}),Object.defineProperty(d,"MENTION",{enumerable:!0,get:function(){return s.MENTION}}),Object.defineProperty(d,"HASHTAG",{enumerable:!0,get:function(){return s.HASHTAG}}),Object.defineProperty(d,"N_URL",{enumerable:!0,get:function(){return s.N_URL}}),Object.defineProperty(d,"LINK",{enumerable:!0,get:function(){return s.LINK}}),Object.defineProperty(d,"FN",{enumerable:!0,get:function(){return s.FN}}),Object.defineProperty(d,"PLAIN",{enumerable:!0,get:function(){return s.PLAIN}}),Object.defineProperty(d,"TEXT",{enumerable:!0,get:function(){return s.TEXT}})}(se)),se}var ld=Se(),md=M("<br>"),pd=M("<b>"),gd=M("<del>"),bd=M("<i>"),hd=M("<span class=mfm-x2>"),vd=M("<span class=mfm-x3>"),yd=M("<span class=mfm-x4>"),_d=M("<span class=_mfm_blur_>"),Ie=M("<ruby>"),$d=M("<rt>"),Ed=M('<span><i class="ti ti-clock"></i><span>'),Od=M("<span>[$<!$><!/> $<!$><!/>]"),we=M("<span>"),Td=M("<small>"),Ld=M("<div>"),oe=M('<a class="text-blue-500 underline hover:text-blue-800"rel="nofollow noopener"target=_blank>'),Id=M('<pre class="my-2 max-w-full overflow-auto rounded-lg bg-gray-100 p-4"><code>'),wd=M("<code>"),Cd=M('<div class="border-l-4 border-blue-700 pl-4 text-blue-900 text-opacity-80 my-2">'),Nd=M('<span class="border-l-4 border-blue-700 pl-4 text-blue-900 text-opacity-80 my-2">'),zd=M("<div class=whitespace-pre-wrap>");function Y(d){if(typeof d!="string"||d==="")return null;const f=Number.parseFloat(d);return Number.isNaN(f)?null:f}function H(d){return d==null||typeof d=="boolean"?null:d.match(/^-?[0-9.]+s$/)?d:null}function le(d){return typeof d!="string"?null:d.match(/^[0-9a-f]{3,6}$/i)?d:null}function Md(d){const s=D(()=>ld.parse(d.text)),m=(I,_)=>I.map(c=>{switch(c.type){case"text":{const l=c.props.text.replace(/(\r\n|\n|\r)/g,`
`),r=[];for(const $ of l.split(`
`))r.push(z(md)),r.push($);return r.shift(),r}case"bold":return(()=>{var l=z(pd);return C(l,()=>m(c.children)),l})();case"strike":return(()=>{var l=z(gd);return C(l,()=>m(c.children)),l})();case"italic":return(()=>{var l=z(bd);return C(l,()=>m(c.children)),l})();case"fn":{let l;switch(c.props.name){case"tada":{const r=H(c.props.args.speed)??"1s",$=H(c.props.args.delay)??"0s";l=`font-size: 150%;animation: global-tada ${r} linear infinite both; animation-delay: ${$};`;break}case"jelly":{const r=H(c.props.args.speed)??"1s",$=H(c.props.args.delay)??"0s";l=`animation: mfm-rubberBand ${r} linear infinite both; animation-delay: ${$};`;break}case"twitch":{const r=H(c.props.args.speed)??"0.5s",$=H(c.props.args.delay)??"0s";l=`animation: mfm-twitch ${r} ease infinite; animation-delay: ${$};`;break}case"shake":{const r=H(c.props.args.speed)??"0.5s",$=H(c.props.args.delay)??"0s";l=`animation: mfm-shake ${r} ease infinite; animation-delay: ${$};`;break}case"spin":{const r=c.props.args.left?"reverse":c.props.args.alternate?"alternate":"normal",$=c.props.args.x?"mfm-spinX":c.props.args.y?"mfm-spinY":"mfm-spin",v=H(c.props.args.speed)??"1.5s",b=H(c.props.args.delay)??"0s";l=`animation: ${$} ${v} linear infinite; animation-direction: ${r}; animation-delay: ${b};`;break}case"jump":{const r=H(c.props.args.speed)??"0.75s",$=H(c.props.args.delay)??"0s";l=`animation: mfm-jump ${r} linear infinite; animation-delay: ${$};`;break}case"bounce":{const r=H(c.props.args.speed)??"0.75s",$=H(c.props.args.delay)??"0s";l=`animation: mfm-bounce ${r} linear infinite; transform-origin: center bottom; animation-delay: ${$};`;break}case"flip":{l=`transform: ${c.props.args.h&&c.props.args.v?"scale(-1, -1)":c.props.args.v?"scaleY(-1)":"scaleX(-1)"};`;break}case"x2":return(()=>{var r=z(hd);return C(r,()=>m(c.children)),r})();case"x3":return(()=>{var r=z(vd);return C(r,()=>m(c.children)),r})();case"x4":return(()=>{var r=z(yd);return C(r,()=>m(c.children)),r})();case"font":{const r=c.props.args.serif?"serif":c.props.args.monospace?"monospace":c.props.args.cursive?"cursive":c.props.args.fantasy?"fantasy":c.props.args.emoji?"emoji":c.props.args.math?"math":null;r&&(l=`font-family: ${r};`);break}case"blur":return(()=>{var r=z(_d);return C(r,()=>m(c.children)),r})();case"rainbow":{const r=H(c.props.args.speed)??"1s",$=H(c.props.args.delay)??"0s";l=`animation: mfm-rainbow ${r} linear infinite; animation-delay: ${$};`;break}case"sparkle":return m(c.children);case"rotate":{l=`transform: rotate(${Y(c.props.args.deg)??90}deg); transform-origin: center center;`;break}case"position":{const r=Y(c.props.args.x)??0,$=Y(c.props.args.y)??0;l=`transform: translateX(${r}em) translateY(${$}em);`;break}case"scale":{const r=Math.min(Y(c.props.args.x)??1,5),$=Math.min(Y(c.props.args.y)??1,5);l=`transform: scale(${r}, ${$});`;break}case"fg":{let r=le(c.props.args.color);r=r??"f00",l=`color: #${r}; overflow-wrap: anywhere;`;break}case"bg":{let r=le(c.props.args.color);r=r??"f00",l=`background-color: #${r}; overflow-wrap: anywhere;`;break}case"border":{let r=le(c.props.args.color);r=r?`#${r}`:"var(--MI_THEME-accent)";let $=c.props.args.style;(typeof $!="string"||!["hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"].includes($))&&($="solid");const v=Y(c.props.args.width)??1,b=Y(c.props.args.radius)??0;l=`border: ${v}px ${$} ${r}; border-radius: ${b}px;${c.props.args.noclip?"":" overflow: clip;"}`;break}case"ruby":if(c.children.length===1){const r=c.children[0],$=r.type==="text"?r.props.text:"";return(()=>{var v=z(Ie);return C(v,()=>[$.split(" ")[0],(()=>{var b=z($d);return C(b,()=>$.split(" ")[1]),b})()]),v})()}else{const r=c.children.at(-1),$=r.type==="text"?r.props.text:"";return(()=>{var v=z(Ie);return C(v,ue(pe,{get each(){return m(c.children.slice(0,c.children.length-1))},children:b=>b.type==="rt"?$.trim():b})),v})()}case"unixtime":{const r=c.children[0],$=Number.parseInt(r.type==="text"?r.props.text:"");return(()=>{var v=z(Ed),b=v.firstChild,p=b.nextSibling;return v.style.setProperty("display","inline-block"),v.style.setProperty("font-size","90%"),v.style.setProperty("border","solid 1px var(--MI_THEME-divider)"),v.style.setProperty("border-radius","999px"),v.style.setProperty("padding","4px 10px 4px 6px"),b.style.setProperty("margin-right","0.25em"),C(p,()=>new Date($*1e3).toLocaleString("ru")),v})()}case"clickable":return m(c.children)}return l===void 0?(()=>{var r=z(Od),$=r.firstChild,v=$.nextSibling,[b,p]=X(v.nextSibling),u=b.nextSibling,n=u.nextSibling,[t,i]=X(n.nextSibling);return C(r,()=>c.props.name,b,p),C(r,()=>m(c.children),t,i),r})():(()=>{var r=z(we);return C(r,()=>m(c.children)),Z($=>We(r,`display: inline-block; ${l}`,$)),r})()}case"small":return(()=>{var l=z(Td);return l.style.setProperty("opacity","0.7"),C(l,()=>m(c.children)),l})();case"center":return(()=>{var l=z(Ld);return l.style.setProperty("text-align","center"),C(l,()=>m(c.children)),l})();case"url":return(()=>{var l=z(oe);return C(l,()=>c.props.url),Z(()=>K(l,"href",c.props.url)),l})();case"link":return(()=>{var l=z(oe);return C(l,()=>m(c.children)),Z(()=>K(l,"href",c.props.url)),l})();case"mention":{const l=d.mentions?.find(r=>r.host===c.props.host&&r.username===c.props.username)?.uri??`https://${c.props.host??void 0}/@${c.props.username}`;return(()=>{var r=z(oe);return K(r,"href",l),C(r,()=>c.props.acct),r})()}case"hashtag":return`#${c.props.hashtag}`;case"blockCode":return(()=>{var l=z(Id),r=l.firstChild;return C(r,()=>c.props.code),l})();case"inlineCode":return(()=>{var l=z(wd);return C(l,()=>c.props.code),l})();case"quote":return d.nowrap?(()=>{var l=z(Nd);return C(l,()=>m(c.children)),l})():(()=>{var l=z(Cd);return C(l,()=>m(c.children)),l})();case"emojiCode":return`:${c.props.name}:`;case"unicodeEmoji":return c.props.emoji;case"mathInline":case"mathBlock":return c.props.formula;case"search":return c.props.query;case"plain":return(()=>{var l=z(we);return C(l,()=>m(c.children)),l})();default:return console.error("unrecognized ast type:",c.type),[]}}).flat(1/0),[g,e]=Ne([d.text]);return be(()=>e(m(s(),d.rootScale??1))),(()=>{var I=z(zd);return C(I,g),I})()}var Ad=M('<div class="flex-1 overflow-auto">'),Sd=M('<div class=text-gray-500>(this is a followers-only post, please <a class="text-blue-500 underline hover:text-blue-800"href=/auth>log in</a> to see it)'),Pd=M('<div class="flex flex-col gap-4">'),jd=M('<a class="text-blue-500 underline hover:text-blue-800"rel="nofollow noopener"target=_blank>'),qd=M('<div class="flex flex-row flex-wrap justify-center gap-4">'),Hd=M('<div class="max-w-full flex flex-col gap-4 overflow-hidden border border-gray-200 rounded-lg p-4"><div class="flex flex-row gap-4"><img class="h-12 w-12 rounded-full"><div class="flex flex-col"><div class=font-bold></div><a class="text-sm text-gray-500"><!$><!/><!$><!/></a></div></div><!$><!/><!$><!/>'),xd=M('<span class="text-sm text-gray-500"> (followers-only)'),Bd=M('<div class="border-l-4 border-blue-500 pl-4 text-sm italic">reply to: <a class="text-blue-500 underline hover:text-blue-800"rel="nofollow noopener"target=_blank>'),Rd=M('<details class="flex flex-col gap-4"><summary class="cursor-pointer text-blue-500 underline hover:text-blue-800">CW: <!$><!/></summary><!$><!/>');const Ce=void 0,Dd=void 0;let me;function Xd(d){const[f,s]=Ne(d.note),m=()=>f().files.map(_=>({..._,url:`/files/${_.id}.${Ve(_.type)}`})),g=()=>m().filter(_=>_.type.startsWith("image/")),e=()=>m().filter(_=>!_.type.startsWith("image/"));be(async()=>{if(!f().encrypted)return;const _=Ge();if(!_)return;me||(me=await Ye(_));const c=await Qe(Ze(f().encrypted),me);s(JSON.parse(ke.decode(c)))});const I=[D(()=>D(()=>!!f().encrypted)()&&z(Sd)),(()=>{var _=z(Ad);return C(_,(()=>{var c=D(()=>!!f().text);return()=>c()&&ue(Md,{get mentions(){return f().mentions},get text(){return f().text??""}})})()),_})(),D(()=>D(()=>e.length>0)()&&(()=>{var _=z(Pd);return C(_,ue(pe,{get each(){return e()},children:c=>(()=>{var l=z(jd);return C(l,()=>c.name),Z(()=>K(l,"href",c.url)),l})()})),_})()),D(()=>D(()=>g.length>0)()&&(()=>{var _=z(qd);return C(_,ue(pe,{get each(){return g()},children:c=>ue(fd,{class:"max-w-80 rounded-lg object-cover",get src(){return c.url},get alt(){return c.name}})})),_})())];return(()=>{var _=z(Hd),c=_.firstChild,l=c.firstChild,r=l.nextSibling,$=r.firstChild,v=$.nextSibling,b=v.firstChild,[p,u]=X(b.nextSibling),n=p.nextSibling,[t,i]=X(n.nextSibling),y=c.nextSibling,[h,E]=X(y.nextSibling),O=h.nextSibling,[o,a]=X(O.nextSibling);return K(l,"src",Dd),K(l,"alt",Ce),C($,Ce),C(v,()=>new Date(f().createdAt).toLocaleString("ru"),p,u),C(v,(()=>{var A=D(()=>f().visibility==="followers");return()=>A()&&z(xd)})(),t,i),C(_,(()=>{var A=D(()=>!!f().replyUrl);return()=>A()&&(()=>{var L=z(Bd),S=L.firstChild,T=S.nextSibling;return C(T,()=>f().replyUrl),Z(()=>K(T,"href",f().replyUrl)),L})()})(),h,E),C(_,(()=>{var A=D(()=>f().cw!=null);return()=>A()?(()=>{var L=z(Rd),S=L.firstChild,T=S.firstChild,w=T.nextSibling,[P,j]=X(w.nextSibling),N=S.nextSibling,[q,x]=X(N.nextSibling);return C(S,()=>f().cw,P,j),C(L,I,q,x),L})():I})(),o,a),Z(()=>K(v,"href",`/notes/${f().id}`)),_})()}export{Xd as Note};
